
<div class="container">
  <div class="header-section">
    <h1>ðŸ“… Gestion des Rendez-vous</h1>
    <p>GÃ©rez efficacement vos demandes de rendez-vous</p>
  </div>

  <div class="stats-container">
    <div class="stat-card">
      <h3>Total</h3>
      <div class="number">{{ tableauClasse?.length || 0 }}</div>
    </div>
    <div class="stat-card">
      <h3>En attente</h3>
      <div class="number">{{ getCountByStatus('pending') }}</div>
    </div>
    <div class="stat-card">
      <h3>ValidÃ©s</h3>
      <div class="number">{{ getCountByStatus('validated') }}</div>
    </div>
    <div class="stat-card">
      <h3>RejetÃ©s</h3>
      <div class="number">{{ getCountByStatus('rejected') }}</div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2>ðŸ“‹ Liste des rendez-vous</h2>
      <span class="badge-count">{{ tableauClasse?.length || 0 }} rendez-vous</span>
    </div>

    <div class="table-container">
      <table *ngIf="tableauClasse && tableauClasse.length > 0">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">NOM PRENOM </th>
            <th scope="col"> DATE HEURE</th>
            <th scope="col">TYPE</th>
            <th scope="col">SYMPTÃ”MES</th>
            <th scope="col">PREMIER RENDEZ VOUS </th>
            <th scope="col">MOMENTS</th>
            <th scope="col">ALERGIE</th>
            <th scope="col">MEDICAMENT PRIS</th>
            <th scope="col">INFORMATION SUPPLEMENTAIRE</th>
            <th scope="col">STATUS</th>
            <th scope="col">ACTION</th>

          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let app of tableauClasse">
            <td class="id-cell">{{ app.id }}</td>
            <td class="name-cell">
              <div class="name-avatar">
                {{ app.firstname?.charAt(0) }}{{ app.lastname?.charAt(0) }}
              </div>
              <span>{{ app.firstname }} {{ app.lastname }}</span>
            </td>
            <td class="date-cell">
              <div class="date-time">
                {{ app.preferredDate || app.preferredTime }}
              </div>
            </td>
            <td>
              <div class="type-cell"> 
                <span class="type-badge">{{ app.appointmentType }}</span>
              </div>
            </td>
            <td class="description-cell">
              <div  class="description-text"> 
              {{ app.symptoms }}
              </div>
            </td>
            <td>{{ app.firstVisit }}</td>
            <td>{{ app.altAvailability }}</td>
            <td>{{ app.allergies }}</td>
            <td>{{app.medications}}</td>
            <td>{{app.additionalInfo}}</td>
            <td>
              <span 
                class="status-badge"
                [ngClass]="{
                  'status-pending': app.status === 'pending',
                  'status-validated': app.status === 'validated',
                  'status-cancelled': app.status === 'cancelled'
                }">
                {{ getStatusLabel(app.status) }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button 
                  class="btn btn-success" 
                  (click)="validerRendezVous(app.id)">
                  âœ“ Valider
                </button>
                <button 
                  class="btn btn-danger" 
                  (click)="rejeterRendezVous(app.id)">
                  âœ• Rejeter
                </button>
                <button 
                  class="btn btn-primary" 
                  (click)="debuterRendezVous(app.id)">
                  â–¶ DÃ©buter
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <div class="empty-state" *ngIf="!tableauClasse || tableauClasse.length === 0">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
          <line x1="16" y1="2" x2="16" y2="6"></line>
          <line x1="8" y1="2" x2="8" y2="6"></line>
          <line x1="3" y1="10" x2="21" y2="10"></line>
        </svg>
        <h3>Aucun rendez-vous</h3>
        <p>Les demandes de rendez-vous apparaÃ®tront ici</p>
      </div>
    </div>
  </div>
</div>